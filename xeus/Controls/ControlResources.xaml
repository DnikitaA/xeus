<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:xeus.Core"
    xmlns:prop="clr-namespace:xeus.Properties"
    xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2006" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    x:Class="xeus.Controls.ControlResource"
    >
	
	<DrawingBrush x:Key="icq_design" Stretch="Uniform">
		<DrawingBrush.Drawing>
			<DrawingGroup>
				<DrawingGroup.Children>
					<GeometryDrawing Geometry="F1 M 119.889,135.889C 119.889,135.889 57.2221,158.556 49.2221,167.889C 41.2221,177.222 37.2221,194.556 46.5554,203.889C 55.8888,213.222 83.8888,217.222 98.5554,203.889C 113.222,190.556 138.555,162.556 138.555,162.556L 119.889,135.889 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<LinearGradientBrush StartPoint="0.000587243,0.307613" EndPoint="0.833925,0.307613">
								<LinearGradientBrush.GradientStops>
									<GradientStop Color="#FFF4B0B0" Offset="0"/>
									<GradientStop Color="#FFDB3838" Offset="0.995763"/>
								</LinearGradientBrush.GradientStops>
							</LinearGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Geometry="F1 M 134.555,137.222L 86.5554,79.889C 86.5554,79.889 75.8888,49.2223 91.8888,41.2223C 107.889,33.2223 130.555,53.2223 130.555,53.2223L 149.222,127.889L 143.889,50.5557C 143.889,50.5557 171.889,15.889 193.222,30.5557C 214.555,45.2223 218.555,54.5557 217.222,70.5557C 215.889,86.5557 166.555,138.556 166.555,138.556L 225.222,90.5557C 225.222,90.5557 255.889,81.2223 262.555,97.2223C 269.222,113.222 262.555,129.222 253.222,135.889C 243.889,142.556 173.222,149.222 173.222,149.222L 247.889,151.889C 247.889,151.889 271.889,167.889 270.555,191.889C 269.665,207.92 255.889,226.556 231.889,221.222C 207.889,215.889 163.889,174.556 163.889,174.556L 202.555,222.556C 202.555,222.556 210.555,246.556 194.555,257.222C 178.555,267.889 157.222,249.222 155.889,242.556C 154.555,235.889 145.222,178.556 145.222,178.556L 146.555,251.889C 146.555,251.889 128.705,281.426 111.889,277.222C 90.5554,271.889 77.2221,249.222 79.8888,235.889C 82.5554,222.556 125.222,167.889 125.222,167.889L 114.555,141.222C 114.555,141.222 70.5554,163.889 50.5554,155.889C 30.5554,147.889 23.8888,121.222 33.2221,107.889C 42.5554,94.5557 62.5554,83.889 75.8888,93.2223C 89.2221,102.556 134.555,134.556 134.555,137.222 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<RadialGradientBrush RadiusX="0.140979" RadiusY="0.136122" Center="0.346869,0.335415" GradientOrigin="0.346869,0.335415">
								<RadialGradientBrush.GradientStops>
									<GradientStop Color="#FFB0F4B6" Offset="0"/>
									<GradientStop Color="#FF5DDB38" Offset="1"/>
								</RadialGradientBrush.GradientStops>
								<RadialGradientBrush.RelativeTransform>
									<TransformGroup/>
								</RadialGradientBrush.RelativeTransform>
							</RadialGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Geometry="F1 M 144.686,121.724C 162.655,121.724 177.222,136.291 177.222,154.26C 177.222,172.23 162.655,186.797 144.686,186.797C 126.717,186.797 112.15,172.23 112.15,154.26C 112.15,136.291 126.717,121.724 144.686,121.724 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<RadialGradientBrush RadiusX="0.409105" RadiusY="0.409105" Center="0.5,0.5" GradientOrigin="0.5,0.5">
								<RadialGradientBrush.GradientStops>
									<GradientStop Color="#FFF2F4B0" Offset="0"/>
									<GradientStop Color="#FFA8A742" Offset="1"/>
								</RadialGradientBrush.GradientStops>
								<RadialGradientBrush.RelativeTransform>
									<TransformGroup/>
								</RadialGradientBrush.RelativeTransform>
							</RadialGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Brush="#4DF8F8F8" Geometry="F1 M 144.785,121.496C 131.419,121.496 119.935,129.556 114.929,141.08C 122.979,144.384 133.358,146.373 144.686,146.373C 156.093,146.373 166.537,144.356 174.611,141.011C 169.588,129.524 158.124,121.496 144.785,121.496 Z "/>
				</DrawingGroup.Children>
			</DrawingGroup>
		</DrawingBrush.Drawing>
	</DrawingBrush>
	
		<DrawingBrush x:Key="msn_design" Stretch="Uniform">
		<DrawingBrush.Drawing>
			<DrawingGroup>
				<DrawingGroup.Children>
					<GeometryDrawing Geometry="F1 M 148.121,119.828C 97.3416,119.828 56.1763,176.196 56.1763,245.728C 56.1763,245.925 56.1766,246.122 56.1773,246.319C 82.8627,263.482 114.273,273.379 147.892,273.379C 181.705,273.379 213.282,263.368 240.066,246.023C 240.067,245.925 240.067,245.827 240.067,245.728C 240.067,176.196 198.901,119.828 148.121,119.828 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<RadialGradientBrush RadiusX="0.476125" RadiusY="0.720777" Center="0.5,0.5" GradientOrigin="0.5,0.5">
								<RadialGradientBrush.GradientStops>
									<GradientStop Color="#FFB0F0F4" Offset="0"/>
									<GradientStop Color="#FF4293A8" Offset="1"/>
								</RadialGradientBrush.GradientStops>
								<RadialGradientBrush.RelativeTransform>
									<TransformGroup/>
								</RadialGradientBrush.RelativeTransform>
							</RadialGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Brush="#5A000000" Geometry="F1 M 147.26,121.005C 125.985,121.005 106.398,130.899 90.819,147.509C 115.845,179.733 151.009,194.999 179.783,182.681C 192.578,177.204 202.467,166.976 209.082,153.712C 192.753,133.391 171.063,121.005 147.26,121.005 Z "/>
					<GeometryDrawing Brush="#4DFFFFFF" Geometry="F1 M 97.0728,248.67C 97.0728,254.15 97.2617,259.576 97.6322,264.94C 82.4439,260.325 68.1055,253.619 54.9206,245.139L 54.9196,244.548C 54.9196,178.931 91.5787,125.039 138.382,119.177C 112.716,153.377 97.0728,198.811 97.0728,248.67 Z "/>
					<GeometryDrawing Geometry="F1 M 147.068,25.8937C 181.979,25.8937 210.28,54.8676 210.28,90.6086C 210.28,126.35 181.979,155.323 147.068,155.323C 112.157,155.323 83.8558,126.35 83.8558,90.6086C 83.8558,54.8676 112.157,25.8937 147.068,25.8937 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<RadialGradientBrush RadiusX="0.450016" RadiusY="0.451127" Center="0.5,0.5" GradientOrigin="0.5,0.5">
								<RadialGradientBrush.GradientStops>
									<GradientStop Color="#FFB0F4B0" Offset="0"/>
									<GradientStop Color="#FF42A892" Offset="1"/>
								</RadialGradientBrush.GradientStops>
								<RadialGradientBrush.RelativeTransform>
									<TransformGroup/>
								</RadialGradientBrush.RelativeTransform>
							</RadialGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Brush="#4DF8F8F8" Geometry="F1 M 147.26,25.4395C 121.292,25.4395 98.9808,41.4703 89.2543,64.3927C 104.895,70.9635 125.059,74.9201 147.068,74.9201C 169.23,74.9201 189.521,70.9085 205.207,64.2556C 195.449,41.4064 173.176,25.4395 147.26,25.4395 Z "/>
				</DrawingGroup.Children>
			</DrawingGroup>
		</DrawingBrush.Drawing>
	</DrawingBrush>


		<DrawingBrush x:Key="jabber_design" Stretch="Uniform">
		<DrawingBrush.Drawing>
			<DrawingGroup>
				<DrawingGroup.Children>
					<GeometryDrawing Geometry="F1 M 167.195,285.656L 129.532,285.656C 115.725,285.656 104.532,274.464 104.532,260.656L 104.532,137.4C 104.532,123.593 115.725,112.4 129.532,112.4L 167.195,112.4C 181.002,112.4 192.195,123.593 192.195,137.4L 192.195,260.656C 192.195,274.464 181.002,285.656 167.195,285.656 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<LinearGradientBrush StartPoint="-0.017004,0.5" EndPoint="1.017,0.5">
								<LinearGradientBrush.GradientStops>
									<GradientStop Color="#FF92B7D3" Offset="0"/>
									<GradientStop Color="#FFE1ECEF" Offset="0.983051"/>
								</LinearGradientBrush.GradientStops>
							</LinearGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Geometry="F1 M 148.058,17.5603C 192.118,17.5603 227.836,53.3032 227.836,97.3944C 227.836,141.486 192.118,177.229 148.058,177.229C 103.998,177.229 68.2802,141.486 68.2802,97.3944C 68.2802,53.3032 103.998,17.5603 148.058,17.5603 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<RadialGradientBrush RadiusX="0.46015" RadiusY="0.460178" Center="0.5,0.5" GradientOrigin="0.5,0.5">
								<RadialGradientBrush.GradientStops>
									<GradientStop Color="#FFF4F0B0" Offset="0"/>
									<GradientStop Color="#FFF6E130" Offset="1"/>
								</RadialGradientBrush.GradientStops>
								<RadialGradientBrush.RelativeTransform>
									<TransformGroup/>
								</RadialGradientBrush.RelativeTransform>
							</RadialGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Brush="#4DF8F8F8" Geometry="F1 M 148.3,17C 115.527,17 87.369,36.776 75.0935,65.0538C 94.8328,73.1597 120.281,78.0407 148.058,78.0407C 176.027,78.0407 201.636,73.0918 221.432,64.8846C 209.118,36.6972 181.008,17 148.3,17 Z "/>
					<GeometryDrawing Geometry="F1 M 109.613,222.442L 190.502,194.886">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
								<LinearGradientBrush.GradientStops>
									<GradientStop Color="#FF92B7D3" Offset="0"/>
									<GradientStop Color="#FFE1ECEF" Offset="0.983051"/>
								</LinearGradientBrush.GradientStops>
							</LinearGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Geometry="F1 M 106.947,257.886L 187.836,230.331">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
						<GeometryDrawing.Brush>
							<LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
								<LinearGradientBrush.GradientStops>
									<GradientStop Color="#FF92B7D3" Offset="0"/>
									<GradientStop Color="#FFE1ECEF" Offset="0.983051"/>
								</LinearGradientBrush.GradientStops>
							</LinearGradientBrush>
						</GeometryDrawing.Brush>
					</GeometryDrawing>
					<GeometryDrawing Brush="#FF000000" Geometry="F1 M 156.28,284.886L 139.391,284.886C 134.237,284.886 130.058,280.707 130.058,275.553L 130.058,275.553C 130.058,270.398 134.237,266.219 139.391,266.219L 156.28,266.219C 161.435,266.219 165.613,270.398 165.613,275.553L 165.613,275.553C 165.613,280.707 161.435,284.886 156.28,284.886 Z ">
						<GeometryDrawing.Pen>
							<Pen Thickness="15" LineJoin="Round" Brush="#FF5A5A5A"/>
						</GeometryDrawing.Pen>
					</GeometryDrawing>
				</DrawingGroup.Children>
			</DrawingGroup>
		</DrawingBrush.Drawing>
	</DrawingBrush>



<SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF" />
<SolidColorBrush x:Key="SolidBorderBrush" Color="#888" />

  <Style x:Key="{x:Static StatusBar.SeparatorStyleKey}" TargetType="Separator">
    <Setter Property="Height" Value="15"/>
    <Setter Property="Margin" Value="4,4,4,4"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Separator">
          <StackPanel
                  d:IsHidden="True" Margin="5,0,5,0">
            <Rectangle Fill="#FFFFFFFF" StrokeThickness="0" Width="3" RadiusX="2" RadiusY="2" Opacity="0.22" Height="3" SnapsToDevicePixels="True" Margin="3,1,3,1"/>
            <Rectangle Fill="#FFFFFFFF" StrokeThickness="0" Width="3" RadiusX="2" RadiusY="2" Opacity="0.22" Height="3" SnapsToDevicePixels="True" Margin="3,1,3,1"/>
            <Rectangle Fill="#FFFFFFFF" StrokeThickness="0" Width="3" RadiusX="2" RadiusY="2" Opacity="0.22" Height="3" SnapsToDevicePixels="True" Margin="3,1,3,1"/>
            <Rectangle Fill="#FFFFFFFF" StrokeThickness="0" Width="3" RadiusX="2" RadiusY="2" Opacity="0.22" Height="3" SnapsToDevicePixels="True" Margin="3,1,3,1"/>
          </StackPanel>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <CollectionViewSource x:Key="_rosterView" Source="{Binding Path=Roster.Items}">
    <CollectionViewSource.GroupDescriptions>
      <PropertyGroupDescription PropertyName="Group"/>
    </CollectionViewSource.GroupDescriptions>
  </CollectionViewSource>

  <DataTemplate x:Key="RosterItemTip" DataType="{x:Type local:RosterItem}">
		<DataTemplate.Resources>
			<Storyboard x:Key="Timeline1">
				<DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="grid" Storyboard.TargetProperty="(UIElement.Opacity)">
					<SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
					<SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0.9"/>
				</DoubleAnimationUsingKeyFrames>
				<ThicknessAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="image" Storyboard.TargetProperty="(FrameworkElement.Margin)">
					<SplineThicknessKeyFrame KeyTime="00:00:00" Value="10,10,0,0"/>
				</ThicknessAnimationUsingKeyFrames>
				<ThicknessAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="_displayName" Storyboard.TargetProperty="(FrameworkElement.Margin)">
					<SplineThicknessKeyFrame KeyTime="00:00:00" Value="75,10,15,0"/>
				</ThicknessAnimationUsingKeyFrames>
				<ThicknessAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="_displayKey" Storyboard.TargetProperty="(FrameworkElement.Margin)">
					<SplineThicknessKeyFrame KeyTime="00:00:00" Value="75,28,15,0"/>
				</ThicknessAnimationUsingKeyFrames>
				<ThicknessAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="_subscription" Storyboard.TargetProperty="(FrameworkElement.Margin)">
					<SplineThicknessKeyFrame KeyTime="00:00:00" Value="75,50,15,0"/>
				</ThicknessAnimationUsingKeyFrames>
			</Storyboard>
		</DataTemplate.Resources>
			<Grid RenderTransformOrigin="0.5,0.5"
				Panel.ZIndex="10" x:Name="grid" MinHeight="60" DockPanel.Dock="Top" Opacity="0.9" Margin="5,5,5,5" >
				<Grid.RenderTransform>
					<TransformGroup>
						<ScaleTransform ScaleX="1" ScaleY="1"/>
						<SkewTransform AngleX="0" AngleY="0"/>
						<RotateTransform Angle="0"/>
						<TranslateTransform X="0" Y="0"/>
					</TransformGroup>
				</Grid.RenderTransform>
				<Border MinHeight="65" x:Name="border" VerticalAlignment="Top" BorderBrush="#FF242424" CornerRadius="3,3,3,3" SnapsToDevicePixels="True">
					<Border.Background>
						<ImageBrush Viewport="0,0,10,10"
							ViewportUnits="Absolute"
							TileMode="Tile" Stretch="None" ImageSource="/Images/stripes.png"/>
					</Border.Background>
					<Border.BitmapEffect>
						<DropShadowBitmapEffect ShadowDepth="2"/>
					</Border.BitmapEffect>
					<Border x:Name="rectangle" MinHeight="65" Opacity="0.92" Margin="-1,-1,-1,-1" Background="#FF0B0B0B" CornerRadius="3,3,3,3" >
						<StackPanel MaxHeight="400" MaxWidth="400" Margin="10,70,10,10">
							<Grid Background="#05FFFFFF" x:Name="_gridTo" Visibility="Visible" >
								<Border BorderBrush="#FF4A4A4A" BorderThickness="0.5,0.5,0.5,0.5" CornerRadius="2,2,2,2"
									HorizontalAlignment="Right" Padding="4,2,4,2" Opacity="0.8"
									Margin="0,0,4,0" Panel.ZIndex="2" VerticalAlignment="Top" x:Name="_timeBorder">
									<Border.Background>
										<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
											<GradientStop Color="#FF78C2E1" Offset="0"/>
											<GradientStop Color="#FFCEE4EB" Offset="1"/>
										</LinearGradientBrush>
									</Border.Background>
									<Border.OpacityMask>
										<RadialGradientBrush>
											<GradientStop Color="#FF000000" Offset="0"/>
											<GradientStop Color="#95FFFFFF" Offset="1"/>
										</RadialGradientBrush>
									</Border.OpacityMask>
									<Border.BitmapEffect>
										<DropShadowBitmapEffect/>
									</Border.BitmapEffect>
									<TextBlock Text="{Binding Path=LastMessageTo.Time}" Foreground="#FF323F48" FontSize="10" x:Name="_time" />
								</Border>
								<TextBlock x:Name="_body" Text="{Binding Path=LastMessageTo.Body, Mode=OneWay}" Foreground="#FFC5A581" 
									TextWrapping="WrapWithOverflow" 
									FontSize="14" Margin="0,13,20,0" Width="Auto" Height="Auto"/>
							</Grid>	
							<Grid Background="#05FFFFFF" x:Name="_gridFrom" Visibility="Visible">
								<Border BorderBrush="#FF4A4A4A" BorderThickness="0.5,0.5,0.5,0.5" CornerRadius="2,2,2,2"
									HorizontalAlignment="Right" Padding="4,2,4,2" Opacity="0.8"
									Margin="0,0,4,0" Panel.ZIndex="2" VerticalAlignment="Top" x:Name="_timeBorderTo">
									<Border.Background>
										<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
											<GradientStop Color="#FF78C2E1" Offset="0"/>
											<GradientStop Color="#FFCEE4EB" Offset="1"/>
										</LinearGradientBrush>
									</Border.Background>
									<Border.OpacityMask>
										<RadialGradientBrush>
											<GradientStop Color="#FF000000" Offset="0"/>
											<GradientStop Color="#95FFFFFF" Offset="1"/>
										</RadialGradientBrush>
									</Border.OpacityMask>
									<Border.BitmapEffect>
										<DropShadowBitmapEffect/>
									</Border.BitmapEffect>
									<TextBlock Text="{Binding Path=LastMessageFrom.Time}" Foreground="#FF323F48" FontSize="10" x:Name="_timeTo" />
								</Border>
								<TextBlock x:Name="_bodyTo" Text="{Binding Path=LastMessageFrom.Body, Mode=OneWay}" Foreground="#FFE7E7E7" 
									TextWrapping="WrapWithOverflow" 
									FontSize="14" Margin="0,13,20,0" Width="Auto" Height="Auto"/>
							</Grid>	
						</StackPanel>
					</Border>
				</Border>
				<Image HorizontalAlignment="Left" Source="{Binding Path=Image}" Grid.Row="0" 
					VerticalAlignment="Top" Stretch="Uniform" Width="48" Height="48" Margin="10,15,0,0" d:LayoutOverrides="GridBox" Panel.ZIndex="1" SnapsToDevicePixels="True" IsEnabled="False" x:Name="image"/>
				<TextBlock Margin="76.333,12.393,15,0"
					TextTrimming="CharacterEllipsis"
					FontFamily="Calibri" Foreground="#FFACACAC"
					VerticalAlignment="Top" x:Name="_displayName" FontSize="16" Text="{Binding Path=DisplayName}" />
				<TextBlock Text="{Binding Path=Key}" HorizontalAlignment="Stretch"
					TextTrimming="CharacterEllipsis"
					FontFamily="Calibri" Foreground="#FFB8D9F2"
					x:Name="_displayKey" Margin="76.333,32.393,15,0" FontSize="14" VerticalAlignment="Top"/>
				<TextBlock HorizontalAlignment="Stretch"
					FontFamily="Calibri" Foreground="#FFB97E7A"
					x:Name="_subscription" Margin="76.333,49.893,15,0" FontSize="14" VerticalAlignment="Top"
					Text="{Binding Path=SubscriptionTypeText}"/>
			</Grid>

		<DataTemplate.Triggers>
			<Trigger Property="IsVisible" Value="True">
				<Trigger.EnterActions>
					<BeginStoryboard Storyboard="{StaticResource Timeline1}"/>
				</Trigger.EnterActions>
			</Trigger>
 			<DataTrigger Binding="{Binding Path=LastMessageTo}" Value="{x:Null}">
					<Setter Property="Visibility" Value="Collapsed" TargetName="_gridTo"/>
        	</DataTrigger>			
 			<DataTrigger Binding="{Binding Path=LastMessageFrom}" Value="{x:Null}">
					<Setter Property="Visibility" Value="Collapsed" TargetName="_gridFrom"/>
        	</DataTrigger>			
		</DataTemplate.Triggers>
	</DataTemplate>	

  <Style TargetType="{x:Type ToolTip}">
	<Setter Property="VerticalOffset" Value="-10" />
	<Setter Property="HorizontalOffset" Value="-10" />
	<Setter Property="Placement" Value="RelativePoint" />

		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type ToolTip}">
					<ContentPresenter />
			</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

  <local:SizeFromSliderConverterSmall x:Key="_sizeFromSliderConverterSmall" />
  <local:OpacityStatusConverter x:Key="_opacityStatusConverter" />

  <DataTemplate x:Key="RosterItemSmall" DataType="{x:Type local:RosterItem}">
    <Viewbox x:Name="_viewbox"
		Width="{Binding Path=Value, Converter={StaticResource _sizeFromSliderConverterSmall}, ElementName=_sliderItemSize}"
		 ContextMenu="{DynamicResource _rosterItemContextMenu}">
    	<StackPanel Opacity="{Binding Path=Presence, Converter={StaticResource _opacityStatusConverter}}" RenderTransformOrigin="0.5,0.5" Margin="3,3,3,3" x:Name="_rosterItemGridOuter" ToolTipService.BetweenShowDelay="1500" ToolTipService.InitialShowDelay="1500" Orientation="Horizontal">		
    		<StackPanel.ToolTip>
    			<ToolTip ContentTemplate="{StaticResource RosterItemTip}" 
    				Content="{Binding Path=DataContext, RelativeSource={RelativeSource Self}}"/>
    		</StackPanel.ToolTip>
		
<Button Template="{Binding Path=StatusTemplate}" IsEnabled="False"
    			Width="22" Height="22" SnapsToDevicePixels="False" x:Name="_statusButton" Opacity="1" BorderThickness="0,0,0,0" d:LayoutOverrides="GridBox" />
		
    		<Border
    			CornerRadius="3,3,3,3" x:Name="_displayNameLabel"
    			BorderThickness="1,1,1,1" BorderBrush="#FF6E7281" Margin="5,0,0,0">
    			<Border.Background>
    				<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
    					<GradientStop Color="#FF54687F" Offset="0"/>
    					<GradientStop Color="#6898AED9" Offset="0.986"/>
    				</LinearGradientBrush>
    			</Border.Background>
    			<Border.OpacityMask>
    				<RadialGradientBrush>
    					<GradientStop Color="#FF000000" Offset="0"/>
    					<GradientStop Color="#C5FFFFFF" Offset="1"/>
    				</RadialGradientBrush>
    			</Border.OpacityMask>
		
    			<StackPanel Margin="4,2,4,2" MaxWidth="200" MinWidth="100" >     
    				<TextBlock Text="{Binding Path=DisplayName}"
    					TextTrimming="CharacterEllipsis"
    					FontFamily="Calibri" Foreground="#FFDCDCDC"
    					x:Name="_displayName" FontSize="12" d:LayoutOverrides="Height" MaxWidth="100"/> 
					<StackPanel Orientation="Horizontal">    
					<Rectangle x:Name="_transport" Width="10" Height="10"
						Fill="{DynamicResource jabber_design}" />
    				<TextBlock Text="{Binding Path=StatusDescription}"
    					FontFamily="Calibri" Foreground="#FFB8D9F2"
    					x:Name="_displayStatus" FontSize="10" TextWrapping="Wrap" Margin="5,0,0,0"/>				
					</StackPanel>
    			</StackPanel>
		
    		</Border>
    	</StackPanel>
	</Viewbox>
	<DataTemplate.Triggers>
		<DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}, AncestorLevel=1}, Path=IsSelected}" Value="False">
			<Setter Property="Background" Value="{x:Null}" TargetName="_displayNameLabel" />
			<Setter Property="BorderBrush" Value="{x:Null}" TargetName="_displayNameLabel" />
		</DataTrigger>
		<DataTrigger Binding="{Binding Path=Transport}" Value="msn">
			<Setter Property="Fill" Value="{DynamicResource msn_design}" TargetName="_transport" />
		</DataTrigger>
		<DataTrigger Binding="{Binding Path=Transport}" Value="icq">
			<Setter Property="Fill" Value="{DynamicResource icq_design}" TargetName="_transport" />
		</DataTrigger>
	</DataTemplate.Triggers>
  </DataTemplate>
  
  <DataTemplate x:Key="RosterItemBig" DataType="{x:Type local:RosterItem}">
  	<Viewbox x:Name="_viewbox"  ContextMenu="{DynamicResource _rosterItemContextMenu}"
		Width="{Binding Path=Value, Converter={StaticResource _sizeFromSliderConverterSmall}, ElementName=_sliderItemSize}">
  	<Grid x:Name="_rosterItemGridOuter" RenderTransformOrigin="0.5,0.5"
			Opacity="{Binding Path=Presence, Converter={StaticResource _opacityStatusConverter}}"
			Margin="3,3,3,3" Width="90" Height="100.819" ToolTipService.InitialShowDelay="1500" 
			ToolTipService.BetweenShowDelay="1500" >
		<Grid.ToolTip>
			<ToolTip ContentTemplate="{StaticResource RosterItemTip}" 
			Content="{Binding RelativeSource={RelativeSource Self},Path=DataContext}"/>
		</Grid.ToolTip>
  		<Grid.RenderTransform>
  			<TransformGroup>
  				<ScaleTransform ScaleX="1" ScaleY="1"/>
  				<SkewTransform AngleX="0" AngleY="0"/>
  				<RotateTransform Angle="0"/>
  				<TranslateTransform X="0" Y="0"/>
  			</TransformGroup>
  		</Grid.RenderTransform>
	    	
  		<Grid.RowDefinitions>
  			<RowDefinition Height="0.113*"/>
  			<RowDefinition Height="0.702*"/>
  			<RowDefinition Height="0.185*"/>
  		</Grid.RowDefinitions>
	    	
  		<Grid d:IsLayer="True" x:Name="Status" Grid.ColumnSpan="1" Grid.RowSpan="3" Panel.ZIndex="3" Margin="0,1,0,-1">
			<Button Template="{Binding Path=StatusTemplate}" HorizontalAlignment="Right"
			Margin="0,0.828,1.549,0" VerticalAlignment="Top" Width="22" Height="22"
			IsEnabled="False" ClipToBounds="False" SnapsToDevicePixels="False" x:Name="_statusButton" Opacity="1" />
 		</Grid>
	    	
  		<Border Margin="0,1.585,0,-2.388" VerticalAlignment="Stretch" Width="Auto"
  		 Height="Auto" Grid.Row="2" Grid.RowSpan="1"
  		 CornerRadius="3,3,3,3" x:Name="_displayNameLabel"
  		 Visibility="Visible" BorderThickness="1,1,1,1">
	      
  			<TextBlock Text="{Binding Path=DisplayName}"
  				TextTrimming="CharacterEllipsis"  				
  				FontFamily="Calibri" Foreground="#FFDCDCDC"
  				Grid.Row="2" TextAlignment="Center" x:Name="_displayName" VerticalAlignment="Center" FontSize="12"/>
	      
  		</Border>
	    	
  		<Path Opacity="0.215" RenderTransformOrigin="0.499999997872742,0.524966983478661" SnapsToDevicePixels="False" Stretch="Fill" StrokeStartLineCap="Square" StrokeThickness="1" Margin="9.001,6.273,8.999,0" VerticalAlignment="Top" Width="Auto" Height="26.765" Grid.RowSpan="2" Panel.ZIndex="2" Data="M2.050252,-1.7272823 L69.930183,-1.7272823 C71.016823,-1.7272825 71.89772,-1.0236186 71.89772,-0.15560764 L71.89772,0.28742129 72,0.28783017 71.999741,30.631169 C71.951302,30.66849 59.999,27.261103 35.785892,27.334388 11.998007,27.406386 3.0632521E-07,30.586258 3.0632521E-07,30.586258 L0.00012261505,1.8544513E-07 0.082717486,0.00033037047 0.082717486,-0.15560764 C0.082717471,-1.0236186 0.96361244,-1.7272825 2.050252,-1.7272823 z" d:LayoutOverrides="Margin">
  			<Path.Fill>
  				<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
  					<GradientStop Color="#FFD9D9D9" Offset="0"/>
  					<GradientStop Color="#FF616161" Offset="0.986"/>
  				</LinearGradientBrush>
  			</Path.Fill>
  		</Path>
	    	
	      <Image HorizontalAlignment="Stretch" Source="{Binding Path=Image}" Grid.Row="1" 
	       VerticalAlignment="Stretch" Stretch="Uniform" Width="Auto" Height="Auto" Margin="10,2,10,10" d:LayoutOverrides="Margin"/>
	      
  		<Grid SnapsToDevicePixels="False" d:IsLayer="True" x:Name="_frame" Grid.ColumnSpan="1" Grid.RowSpan="3" Panel.ZIndex="-1">
  			<Path RenderTransformOrigin="0.5,0.5" Stretch="Fill" StrokeStartLineCap="Square" StrokeThickness="1" Height="Auto" Data="M2.5,0.5 L71.5,0.5 C72.604568,0.5 73.5,1.3954304 73.5,2.5 L73.5,71.5 C73.5,72.604568 72.604568,73.5 71.5,73.5 L2.5,73.5 C1.3954304,73.5 0.5,72.604568 0.5,71.5 L0.5,2.5 C0.5,1.3954304 1.3954304,0.5 2.5,0.5 z" Fill="#5B000000" Margin="9.25,6.75,6.75,20.069">
  				<Path.RenderTransform>
  					<TransformGroup>
  						<ScaleTransform ScaleX="1" ScaleY="1"/>
  						<SkewTransform AngleX="0" AngleY="0"/>
  						<RotateTransform Angle="-90"/>
  						<TranslateTransform X="0" Y="0"/>
  					</TransformGroup>
  				</Path.RenderTransform>
  			</Path>
	      
  			<Path RenderTransformOrigin="0.5,0.5" Stretch="Fill"
			 Stroke="#FF282828" StrokeStartLineCap="Square" StrokeThickness="1"
			  Margin="8,5.25,8,21.569" VerticalAlignment="Stretch" Height="Auto"
			   Data="M2.5,0.5 L71.5,0.5 C72.604568,0.5 73.5,1.3954304 73.5,2.5 L73.5,71.5 C73.5,72.604568 72.604568,73.5 71.5,73.5 L2.5,73.5 C1.3954304,73.5 0.5,72.604568 0.5,71.5 L0.5,2.5 C0.5,1.3954304 1.3954304,0.5 2.5,0.5 z"
			    d:LayoutOverrides="Margin">
  				<Path.RenderTransform>
  					<TransformGroup>
  						<ScaleTransform ScaleX="1" ScaleY="1"/>
  						<SkewTransform AngleX="0" AngleY="0"/>
  						<RotateTransform Angle="-270"/>
  						<TranslateTransform X="0" Y="0"/>
  					</TransformGroup>
  				</Path.RenderTransform>
  				<Path.Fill>
  					<LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
  						<GradientStop Color="#FF090909" Offset="0"/>
  						<GradientStop Color="#FF363636" Offset="1"/>
  					</LinearGradientBrush>
  				</Path.Fill>
  			</Path>
  		</Grid>
	</Grid>
	</Viewbox>
	<DataTemplate.Triggers>
		<DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}, AncestorLevel=1}, Path=IsSelected}" Value="True">
			<Setter Property="Background" Value="#9CBAE8FF" TargetName="_displayNameLabel" />
		</DataTrigger>
		<DataTrigger Binding="{Binding Path=HasSpecialStatus}" Value="false">
			<Setter Property="Visibility" Value="Hidden" TargetName="_statusButton" />
		</DataTrigger>
	</DataTemplate.Triggers>
  </DataTemplate>

	<Style x:Key="{x:Type ListBoxItem}" TargetType="ListBoxItem">
	  <Setter Property="OverridesDefaultStyle" Value="true"/>
	  <Setter Property="Template">
	    <Setter.Value>
	      <ControlTemplate TargetType="ListBoxItem">
	        <Border Name="Border" Padding="2" Background="{x:Null}">
	          <ContentPresenter />
	        </Border>
	      </ControlTemplate>
	    </Setter.Value>
	  </Setter>
	</Style>
 	
	<Style x:Key="ListBoxStyleRoster" TargetType="{x:Type ListBox}" >
	  <Setter Property="ItemsPanel">
	    <Setter.Value>
	      <ItemsPanelTemplate>
	        <WrapPanel/>
	      </ItemsPanelTemplate>
	    </Setter.Value>
	  </Setter>
	  <Setter Property="Template">
	    <Setter.Value>
	      <ControlTemplate TargetType="{x:Type ListBox}">
	          <ScrollViewer HorizontalScrollBarVisibility="Disabled" CanContentScroll="false">
	            <ItemsPresenter />
	          </ScrollViewer>
	      </ControlTemplate>
	    </Setter.Value>
	  </Setter>	  
	</Style>

<DataTemplate x:Key="RosterItemTab" DataType="{x:Type local:RosterItem}">
	<DataTemplate.Resources>
		<Storyboard x:Key="Timeline1">
			<ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="_unreadMsg" Storyboard.TargetProperty="(UIElement.Visibility)">
				<DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}"/>
				<DiscreteObjectKeyFrame KeyTime="00:00:00.2000000" Value="{x:Static Visibility.Hidden}"/>
			</ObjectAnimationUsingKeyFrames>
		</Storyboard>
	</DataTemplate.Resources>
	<StackPanel Opacity="{Binding Path=Presence, Converter={StaticResource _opacityStatusConverter}}" RenderTransformOrigin="0.5,0.5" Margin="3,3,3,3" x:Name="_rosterItemGridOuter" Orientation="Horizontal" ToolTipService.BetweenShowDelay="1500" ToolTipService.InitialShowDelay="1500">
		<Button x:Name="_unreadMsg" Width="27" Template="{DynamicResource MessageIcon}" Height="27" IsEnabled="False" ToolTip="Unread Messages" Panel.ZIndex="10" />
		<Image Source="{Binding Path=Image}" Stretch="Uniform" Width="30" Height="30" Margin="4,0,0,0"/>
		<Border
			CornerRadius="3,3,3,3" x:Name="_displayNameLabel"
			Visibility="Visible" BorderThickness="1,1,1,1" d:LayoutOverrides="GridBox" Margin="4,0,0,0">
			<StackPanel HorizontalAlignment="Stretch" Grid.Row="1" Margin="2,2,2,2">     
				<TextBlock Text="{Binding Path=DisplayName}"
					TextTrimming="CharacterEllipsis"
					FontFamily="Calibri" Foreground="#FFDDDDDD"
					x:Name="_displayName" FontSize="12" SnapsToDevicePixels="True"/>
				<TextBlock Text="{Binding Path=StatusDescription}"
					TextTrimming="CharacterEllipsis"
					FontFamily="Calibri" Foreground="#FF9DC6E7"
					x:Name="_displayStatus" FontSize="10" SnapsToDevicePixels="True"/>				
			</StackPanel>  
		</Border>
	</StackPanel>
	<DataTemplate.Triggers>
		<Trigger Property="Visibility" SourceName="_unreadMsg" Value="Visible">
			<Trigger.EnterActions>
				<BeginStoryboard x:Name="Timeline1_BeginStoryboard" Storyboard="{StaticResource Timeline1}"/>
			</Trigger.EnterActions>
			<Trigger.ExitActions>
				<StopStoryboard BeginStoryboardName="Timeline1_BeginStoryboard"/>
			</Trigger.ExitActions>
		</Trigger>
		<DataTrigger Binding="{Binding Path=HasUnreadMessages}" Value="false">
			<Setter Property="Visibility" Value="Collapsed" TargetName="_unreadMsg" />
		</DataTrigger>
	</DataTemplate.Triggers>
  </DataTemplate>
  
 <DataTemplate x:Key="ChatMessageItem" DataType="{x:Type local:ChatMessage}">
		<Grid Background="#05FFFFFF" x:Name="_grid">
			<Grid.LayoutTransform>
				<TransformGroup>
					<ScaleTransform>
						<ScaleTransform.ScaleY>
	          				<Binding Path="UI_MessageTextSlider" Source="{x:Static prop:Settings.Default}" Mode="OneWay"/>
						</ScaleTransform.ScaleY>
						<ScaleTransform.ScaleX>
	          				<Binding Path="UI_MessageTextSlider" Source="{x:Static prop:Settings.Default}" Mode="OneWay"/>
						</ScaleTransform.ScaleX>
					</ScaleTransform>
					<SkewTransform AngleX="0" AngleY="0"/>
					<RotateTransform Angle="0"/>
					<TranslateTransform X="0" Y="0"/>
				</TransformGroup>
			</Grid.LayoutTransform>
			<Border BorderBrush="#FF4A4A4A" BorderThickness="0.5,0.5,0.5,0.5" CornerRadius="2,2,2,2"
			 HorizontalAlignment="Right" Padding="4,2,4,2" Opacity="0.8"
			 Margin="0,29.7,4,0" Panel.ZIndex="2" VerticalAlignment="Top" x:Name="_timeBorder">
				<Border.Background>
					<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
						<GradientStop Color="#FF78C2E1" Offset="0"/>
						<GradientStop Color="#FFCEE4EB" Offset="1"/>
					</LinearGradientBrush>
				</Border.Background>
				<Border.OpacityMask>
					<RadialGradientBrush>
						<GradientStop Color="#FF000000" Offset="0"/>
						<GradientStop Color="#95FFFFFF" Offset="1"/>
					</RadialGradientBrush>
				</Border.OpacityMask>
				<Border.BitmapEffect>
					<DropShadowBitmapEffect/>
				</Border.BitmapEffect>
				<TextBlock Text="{Binding Path=RelativeTime}" Foreground="#FF323F48" FontSize="10" x:Name="_time" />
			</Border>			
	    <DockPanel >
			<Image Source="{Binding Path=Image}" Width="40" VerticalAlignment="Top" Height="40" HorizontalAlignment="Right"
				x:Name="_image" DockPanel.Dock="Right" />
			<TextBox x:Name="_body" Text="{Binding Path=Body, Mode=OneWay}" FontSize="12" Foreground="#FFC5A581" 
			 Margin="10,0,10,0" TextWrapping="WrapWithOverflow" 
			 		DockPanel.Dock="Right" Style="{DynamicResource TextBoxStyleBlack}" IsReadOnly="True" IsUndoEnabled="False">
      </TextBox>
	    </DockPanel>
	</Grid>
	<DataTemplate.Triggers>
		<Trigger Property="IsMouseOver" SourceName="_time" Value="True">
			<Setter Property="Text" Value="{Binding Path=Time}" TargetName="_time" />
		</Trigger>
		<DataTrigger Binding="{Binding Path=SentByMe}" Value="true">
			<Setter Property="DockPanel.Dock" Value="Left" TargetName="_body" />
			<Setter Property="DockPanel.Dock" Value="Left" TargetName="_image" />
			<Setter Property="HorizontalAlignment" Value="Left" TargetName="_timeBorder" />
			<Setter Property="Foreground" Value="White" TargetName="_body" />
			<Setter Property="Background" Value="#00FFFFFF" TargetName="_grid" />
		</DataTrigger>
	</DataTemplate.Triggers>

</DataTemplate>

  <DataTemplate x:Key="HeadlineMessageItem" DataType="{x:Type local:HeadlineMessage}">
    <Grid Background="#05FFFFFF" x:Name="_grid">
      <Border BorderBrush="#FF4A4A4A" BorderThickness="0.5,0.5,0.5,0.5" CornerRadius="2,2,2,2"
			 HorizontalAlignment="Right" Padding="4,2,4,2" Opacity="0.8"
			 Margin="0,4,4,0" Panel.ZIndex="2" VerticalAlignment="Top" x:Name="_timeBorder">
        <Border.Background>
          <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF78C2E1" Offset="0"/>
            <GradientStop Color="#FFCEE4EB" Offset="1"/>
          </LinearGradientBrush>
        </Border.Background>
        <Border.OpacityMask>
          <RadialGradientBrush>
            <GradientStop Color="#FF000000" Offset="0"/>
            <GradientStop Color="#95FFFFFF" Offset="1"/>
          </RadialGradientBrush>
        </Border.OpacityMask>
        <Border.BitmapEffect>
          <DropShadowBitmapEffect/>
        </Border.BitmapEffect>
        <TextBlock Text="{Binding Path=Time}" Foreground="#FF323F48" FontSize="10" x:Name="_time" />
      </Border>
        <TextBox x:Name="_body" Text="{Binding Path=Body, Mode=OneWay}" Foreground="White"
         Margin="10,0,10,0" TextWrapping="WrapWithOverflow"
            DockPanel.Dock="Right" FontSize="11" Style="{DynamicResource TextBoxStyleBlack}" IsReadOnly="True" IsUndoEnabled="False"/>
    </Grid>
  </DataTemplate>
  
  
</ResourceDictionary>